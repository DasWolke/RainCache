<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>RainCache</title><meta name="description" content="Documentation for RainCache"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">RainCache</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>RainCache</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#raincache" id="raincache" style="color: inherit; text-decoration: none;">
  <h1>RainCache</h1>
</a>

<a href="#a-simple-and-modular-discord-caching-library" id="a-simple-and-modular-discord-caching-library" style="color: inherit; text-decoration: none;">
  <h2>A simple and modular discord caching library</h2>
</a>
<p>Part of the WeatherStack</p>
<p>You want to use a shared cache for your discord bot ? Maybe MongoDB ? But Presences should be stored in redis ?</p>
<p>Then RainCache is the right tool for the job!</p>

<a href="#cool-things-you-can-do-with-raincache" id="cool-things-you-can-do-with-raincache" style="color: inherit; text-decoration: none;">
  <h4>Cool things you can do with RainCache:</h4>
</a>
<ul>
<li>Store data received from discord in a configurable storage medium</li>
<li>Select the type of storage on a type level basis (e.g Channel, Presence, etc..)</li>
<li>Batteries included, RainCache can parse raw discord events and store the data accordingly</li>
<li>Easily customizable, you can write your own storage engine, connector or cache class</li>
</ul>

<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
  <h4>Documentation:</h4>
</a>
<p>You can find the docs at <a href="https://daswolke.github.io/RainCache/">https://daswolke.github.io/RainCache/</a></p>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h4>Installation:</h4>
</a>
<p>To install RainCache, make sure that you have node 12 or higher and npm installed on your computer.
Then run the following command in a terminal <code>npm install raincache</code></p>

<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h4>Example:</h4>
</a>
<pre><code class="language-js"><span class="hl-0">const</span><span class="hl-1"> { </span><span class="hl-2">RainCache</span><span class="hl-1">, </span><span class="hl-2">AmqpConnector</span><span class="hl-1">, </span><span class="hl-2">RedisStorageEngine</span><span class="hl-1"> } = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&quot;raincache&quot;</span><span class="hl-1">);</span><br/><span class="hl-5">// Use the default options and create a new connector which isn&#39;t connected yet</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">con</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">AmqpConnector</span><span class="hl-1">();</span><br/><span class="hl-5">// Create a new uninitialized RainCache instance, set redis as the default storage engine,</span><br/><span class="hl-5">// disable debugging mode and pass an inbound and an outbound connector to receive and forward events</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">cache</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">RainCache</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-6">storage:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">default:</span><span class="hl-1"> </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">RedisStorageEngine</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-6">redisOptions:</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-6">host:</span><span class="hl-1"> </span><span class="hl-4">&quot;localhost&quot;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">    }, </span><span class="hl-6">debug:</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1">},</span><br/><span class="hl-1">    </span><span class="hl-6">con</span><span class="hl-1">, </span><span class="hl-5">/* THIS PARAM IS FOR SENDING DATA OFF SOMEWHERE ELSE AFTER PROCESSING IS DONE */</span><span class="hl-1">);</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-3">init</span><span class="hl-1"> = </span><span class="hl-0">async</span><span class="hl-1"> () </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">// initialize the cache, the connector and the database connection</span><br/><span class="hl-1">    </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-6">cache</span><span class="hl-1">.</span><span class="hl-3">initialize</span><span class="hl-1">();</span><br/><span class="hl-1">};</span><br/><span class="hl-5">// Declare an asynchronous init method</span><br/><span class="hl-3">init</span><span class="hl-1">().</span><span class="hl-3">then</span><span class="hl-1">(() </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-4">&quot;Cache initialized&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">}).</span><span class="hl-3">catch</span><span class="hl-1">(</span><span class="hl-6">e</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-3">error</span><span class="hl-1">(</span><span class="hl-6">e</span><span class="hl-1">));</span><br/><span class="hl-5">// Run the init function</span>
</code></pre>

<a href="#small-tricks-and-hints" id="small-tricks-and-hints" style="color: inherit; text-decoration: none;">
  <h4>Small tricks and hints:</h4>
</a>
<ul>
<li>RainCache creates an entry on the user collection with an id of &quot;self&quot; when it processes the READY packet,
 this entry only contains an id and allows you to easily get the current user from the cache by looking up the id.</li>
</ul>
<hr>

<a href="#notable-difference-to-normal-caches" id="notable-difference-to-normal-caches" style="color: inherit; text-decoration: none;">
  <h4>Notable Difference to normal caches</h4>
</a>
<p>RainCache generally does not have any differences in comparison with general discord library caches, but there is one notable difference:</p>
<p><strong>Presences are stored per user and not per guild</strong></p>
<p>This means that you should make sure to fetch all users of a guild on startup of the gateway (by using guild member chunk),
because you may have to deal with users that are not cached yet.
This decision has the benefit,that you can safely ignore the presence_update event when you do not care about the status (online/offline, etc..) of a user.
Apart from that it allows RainCache to minimize the storage usage a lot, since a user has one presence instead of x presences.</p>
<hr>

<a href="#object-binding" id="object-binding" style="color: inherit; text-decoration: none;">
  <h4>Object Binding</h4>
</a>
<p>RainCache returns the data received as a cache object with additional properties found in the retrieved data.
 This way you can easily retrieve additional properties of received data (e.g. permission overwrites of a channel).</p>
<pre><code class="language-js"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">cache</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">RainCache</span><span class="hl-1">(</span><span class="hl-6">someOptions</span><span class="hl-1">);</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">channel</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-6">cache</span><span class="hl-1">.</span><span class="hl-6">channel</span><span class="hl-1">.</span><span class="hl-3">get</span><span class="hl-1">(</span><span class="hl-4">&#39;channel id&#39;</span><span class="hl-1">)</span><br/><span class="hl-5">// The received object is a channel cache with the properties of the retrieved channel object (id, name, type, etc..) attached to it</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">overwrites</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-6">channel</span><span class="hl-1">.</span><span class="hl-6">permissionOverwrites</span><span class="hl-1">.</span><span class="hl-3">getIndexMembers</span><span class="hl-1">()</span><br/><span class="hl-5">//this would load all permission overwrites for the channel previously loaded</span>
</code></pre>
<hr>

<a href="#indexing" id="indexing" style="color: inherit; text-decoration: none;">
  <h4>Indexing</h4>
</a>
<p>RainCache uses indexing to allow you to easily get something like a list of all members of a server or similar,
although, depending on the storage engine you use, it might not be needed.
Whether indexing is used is up to the programmer of the storage engine you use.
The Redis Storage Engine which is already shipped with RainCache does use indexing by creating a redis set per namespace with a collection of ids in it.
This way you have a redis set containing something like a list of all members that are in a server available at <code>guild.$guild_id.member</code></p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="modules/_internal_.html">&lt;internal&gt;</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-class"><a href="classes/AmqpConnector.html" class="tsd-kind-icon">Amqp<wbr/>Connector</a></li><li class="tsd-kind-variable"><a href="modules.html#BaseCache" class="tsd-kind-icon">Base<wbr/>Cache</a></li><li class="tsd-kind-class"><a href="classes/BaseConnector.html" class="tsd-kind-icon">Base<wbr/>Connector</a></li><li class="tsd-kind-class tsd-has-type-parameter"><a href="classes/BaseStorageEngine.html" class="tsd-kind-icon">Base<wbr/>Storage<wbr/>Engine</a></li><li class="tsd-kind-class"><a href="classes/ChannelCache.html" class="tsd-kind-icon">Channel<wbr/>Cache</a></li><li class="tsd-kind-class"><a href="classes/ChannelMapCache.html" class="tsd-kind-icon">Channel<wbr/>Map<wbr/>Cache</a></li><li class="tsd-kind-class"><a href="classes/DirectConnector.html" class="tsd-kind-icon">Direct<wbr/>Connector</a></li><li class="tsd-kind-class"><a href="classes/EmojiCache.html" class="tsd-kind-icon">Emoji<wbr/>Cache</a></li><li class="tsd-kind-class"><a href="classes/EventProcessor.html" class="tsd-kind-icon">Event<wbr/>Processor</a></li><li class="tsd-kind-class"><a href="classes/GuildCache.html" class="tsd-kind-icon">Guild<wbr/>Cache</a></li><li class="tsd-kind-class"><a href="classes/MemberCache.html" class="tsd-kind-icon">Member<wbr/>Cache</a></li><li class="tsd-kind-class tsd-has-type-parameter"><a href="classes/MemoryStorageEngine.html" class="tsd-kind-icon">Memory<wbr/>Storage<wbr/>Engine</a></li><li class="tsd-kind-class"><a href="classes/PermissionOverwriteCache.html" class="tsd-kind-icon">Permission<wbr/>Overwrite<wbr/>Cache</a></li><li class="tsd-kind-class"><a href="classes/PresenceCache.html" class="tsd-kind-icon">Presence<wbr/>Cache</a></li><li class="tsd-kind-class tsd-has-type-parameter"><a href="classes/RainCache.html" class="tsd-kind-icon">Rain<wbr/>Cache</a></li><li class="tsd-kind-class tsd-has-type-parameter"><a href="classes/RedisStorageEngine.html" class="tsd-kind-icon">Redis<wbr/>Storage<wbr/>Engine</a></li><li class="tsd-kind-class"><a href="classes/RoleCache.html" class="tsd-kind-icon">Role<wbr/>Cache</a></li><li class="tsd-kind-class"><a href="classes/UserCache.html" class="tsd-kind-icon">User<wbr/>Cache</a></li><li class="tsd-kind-class"><a href="classes/VoiceStateCache.html" class="tsd-kind-icon">Voice<wbr/>State<wbr/>Cache</a></li><li class="tsd-kind-property"><a href="modules.html#default" class="tsd-kind-icon">default</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>